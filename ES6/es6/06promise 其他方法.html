<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			function requestImg(imgSrc){
				return new Promise((resolve,reject)=>{
				const img = new Image();
				img.onload = function(){
					resolve(img);
				}
				img.src = imgSrc;
			});
			}
			function timeout(){
				return new Promise((resolve,reject)=>{
					setTimeout(()=>{
						reject('图片请求超时');
					},3000);
				})
			}
			Promise.race([requestImg('images/2.jpg'),timeout()]).then(res=>{
				console.log(res);
				document.body.appendChild(res);
			}).catch(err=>{
				console.log(err);
			})
		</script>
	</body>
</html>
